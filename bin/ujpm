#!/usr/bin/env node
import cli from 'commander';
import { init, install, remove, update } from '../src/ujpm.js';
import { createRequire } from 'module';
const require = createRequire(import.meta.url);
const pkg = require('../package.json');

cli.version(pkg.version, '-v, --version')

cli.command('init')
  .description('Initialize the UJPM config')
  .option('-t, --target [value]', 'Set the target directory ', `ujpm`)
  .action((options) => {
    init(options.target);
  });

cli.command('install <package>')
  .alias('i')
  .description('Install a package')
  .action((dep) => {
    install(dep);
  });

cli.command('remove <package>')
  .alias('r')
  .description('Remove a package')
  .action((dep) => {
    remove(dep);
  });

cli.command('update <package>')
  .alias('u')
  .description('Update a package')
  .action((dep) => {
    console.log('update')
    console.log(dep);
  });

cli.parse(process.argv);
